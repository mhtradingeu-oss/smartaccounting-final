# PHASE 4 — Demo Realism Report

## Demo dataset description
- Seeds a single German company (`SmartAccounting Demo GmbH`) plus four roles so every workflow (admin / accountant / auditor / viewer) can be exercised immediately; all records inherit `companyId=SmartAccounting Demo GmbH` and the invoices/expenses are denominated in EUR (see the `DEMO_COMPANY` definition and the invoice builder at `database/seeders/demo/20251226-demo-seed.js:7` and `database/seeders/demo/20251226-demo-seed.js:792`).
- The twelve `INVOICE_TEMPLATES` cover `PAID`, `SENT`, and `DRAFT` states, mix 19% and 7% VAT, and include both single-line items and bulk quantities (e.g., 200 manuals for the 7% invoice) so German compliance and aggregation logic are exercised (`database/seeders/demo/20251226-demo-seed.js:24` and `database/seeders/demo/20251226-demo-seed.js:111`).
- Twenty-one `EXPENSE_TEMPLATES` span February through April across rent, travel, subscriptions, hardware, and hospitality with different sources/statuses, including a 7% VAT hospitality item flagged later (`database/seeders/demo/20251226-demo-seed.js:172`).
- A bank statement covering 2026‑Q1 through Q2 feeds 25 transactions (matched credits/debits, partial payments, and unmatched amounts such as the Momentum Ventures prepayment and the 2025 tax refund) so both reconciled and unreconciled paths exist (`database/seeders/demo/20251226-demo-seed.js:415` and `database/seeders/demo/20251226-demo-seed.js:676`).
- Tax reports are generated for Q1 (draft/pending) and Q2 (submitted) so VAT-forward/backward coverage lands on quarter boundaries (`database/seeders/demo/20251226-demo-seed.js:739`).
- AI insights for late payment risk (overdue invoice SA-INV-2026-002), a VAT anomaly (reduced rate hospitality), and a duplicate invoice suspicion include `confidenceScore`, `why`, and jurisdictional context plus an advisory disclaimer (`database/seeders/demo/20251226-demo-seed.js:1284`).
- Guard rails stop accidental seeding: `requireDemoSeedEnabled` insists on both `DEMO_MODE=true` and `ALLOW_DEMO_SEED=true`, the `down` path uses the same guard, the production helper refuses the run unless the same flags (and `ALLOW_DEMO_SEED_PROD` when `NODE_ENV=production`) are present, and docs reiterate the steps (`database/seeders/demo/20251226-demo-seed.js:756`, `database/seeders/demo/20251226-demo-seed.js:1461`, `scripts/seed-demo-prod.js:4`, and `docs/DEMO_SEEDING.md:3`).

## Covered edge cases
- **Mixed VAT / status mix:** Invoices alternate between 19% and 7% VAT and between `PAID`, `SENT`, and `DRAFT`, while expenses carry draft/booked/archived statuses to show how different ledgers behave (`database/seeders/demo/20251226-demo-seed.js:24` and `database/seeders/demo/20251226-demo-seed.js:172`).
- **Partial payments and overdue:** Bank transactions reference partial matches (e.g., 40% of SA-INV-2026-002 and installments for SA-INV-2026-005/011) so unpaid totals stay open and trigger the late-payment AI insight (`database/seeders/demo/20251226-demo-seed.js:496` and `database/seeders/demo/20251226-demo-seed.js:1288`).
- **Reconciled vs unmatched banking:** Matched transactions see `matchReference` lookups, while Momentum Ventures prepayment and the 2025 tax refund leave no reference so both reconciled and unreconciled UI states appear (`database/seeders/demo/20251226-demo-seed.js:434` and `database/seeders/demo/20251226-demo-seed.js:676`).
- **Expenses over months/quarters:** Expense dates march through February, March, and April covering rent, travel, subscriptions, hardware, and hospitality, which stress dashboards that aggregate by month/quarter (`database/seeders/demo/20251226-demo-seed.js:172`).
- **Problematic scenarios:** The VAT anomaly insight cites the 7% travel expense and the duplicate-invoice insight flags the second Märkisches Ventures invoice, giving auditors concrete reasons + confidence scores to investigate (`database/seeders/demo/20251226-demo-seed.js:1312`).
- **Empty states:** Because the first invoice is dated 2026-02-01, a monthly summary for January (or May, which has no new invoice) shows zero rows; `Invoices` falls back to `PageEmptyState` while retaining the same CTA/message so the UI never crashes (`database/seeders/demo/20251226-demo-seed.js:31` and `client/src/pages/Invoices.jsx:187`).
- **Single-item states:** Many invoices (e.g., SA-INV-2026-001 and SA-INV-2026-008) have only one line item, ensuring creation and detail views can handle sparse payloads before larger bundles appear (`database/seeders/demo/20251226-demo-seed.js:33`).
- **Large values:** High totals such as the 4.2k AI automation deployment, 3.57k duplicate invoice, and the 4.2k Momentum Ventures prepayment compel the UI to format EUR properly (`database/seeders/demo/20251226-demo-seed.js:123` and `database/seeders/demo/20251226-demo-seed.js:676`; `client/src/pages/Invoices.jsx:31`).
- **Boundary dates:** SA-INV-2026-011 is due on 2026-04-30, the bank statement ends on 2026-04-30, and tax reports navigate Q1/Q2 so quarter-end rollups hit their cutoffs (`database/seeders/demo/20251226-demo-seed.js:147`, `database/seeders/demo/20251226-demo-seed.js:423`, and `database/seeders/demo/20251226-demo-seed.js:739`).
- **Safe copy and totals:** `View` components rely on `PageLoadingState`, `PageErrorState`, and `PageEmptyState` to keep copy consistent even when data is missing, and `formatCurrency`/`formatDate` ensure German formatting for totals and labels (`client/src/components/ui/PageStates.jsx:9` and `client/src/pages/Invoices.jsx:31`).

## Screens / code references
- `client/src/pages/Dashboard.jsx:111` — admin-only “Load Demo Data” CTA and modal explicitly call out that invoices/expenses/bank statements are demo-only and require a manual confirmation plus success/error messaging.
- `client/src/pages/Invoices.jsx:187` — roll-through of loading/empty/error/table states ensures edge-case copies stay consistent when the seeded periods have no invoices.
- `client/src/components/ui/PageStates.jsx:9` — shared loading/empty/error components that keep the UI stable when demo data triggers empty months.
- `client/src/pages/AIInsights.jsx:98` — the AI Suggestions header reiterates “Suggestion / Recommendation only” and adds an audit-safe footer noting no actions are taken automatically.
- `client/src/components/AISuggestionCard.jsx:13` — every card surfaces “Confidence,” “Explanation,” and an italicized advisory note so the seeded `why`/`confidenceScore` can be seen directly.
- `client/src/components/AIDrawer.jsx:26` together with `client/src/components/AIInsightCard.jsx:17` — drawers and cards present a “Why:” block and a colored confidence pill so explainability and confidence are visible without modifying data.
- `client/src/pages/AIAssistant.jsx:44` — the assistant’s intro message tallies demo insights/invoices/transactions so seeded AI summaries are surfaced in the conversation context.

## Remaining realism gaps
- The dataset lives under one company in Berlin, all amounts use EUR, and no multi-company or cross-currency variation is modeled, so workflows that exercise inter-company transfers or FX rounding remain untested (`database/seeders/demo/20251226-demo-seed.js:7` and `database/seeders/demo/20251226-demo-seed.js:792`).
- Credit notes/negative invoices aren’t seeded; every invoice is positive and in one of the `PAID`, `SENT`, or `DRAFT` buckets, so reversals or refund-heavy edge cases still require manual data prep (`database/seeders/demo/20251226-demo-seed.js:24`).
