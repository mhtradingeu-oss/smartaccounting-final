# PHASE 2 UI/UX Audit

## 1 Header & TopBar Audit
- **Duplicate placeholder actions in the profile menu** — `Profile`, `Settings`, and `Bookmarks` are rendered as disabled buttons that do not navigate anywhere (and two of them repeat the same “coming soon” messaging). This creates unnecessary visual weight in the top bar because none of the actions are implemented yet. (`client/src/components/TopBar.jsx:546-573`). **Fix:** remove or collapse the unsupported entries into a single placeholder until a real route exists; keep the dropdown focused on the one working action (`Logout`).
- **Disabled control missing a tooltip** — the `Bookmarks` button has no `title`/`aria` description while the other disabled controls describe why they are inert (`client/src/components/TopBar.jsx:566-572`). **Fix:** add the same contextual tooltip (`title` or `aria-describedby`) or hide the control until the feature ships to avoid accessibility/UX gaps.
- **Session badges and helper copy are hard-coded** (`Read-only session`, `Full access`, `Sessions stay active until you log out…`; see `client/src/components/TopBar.jsx:500-579`). These strings sit next to translated labels, so they break localization and tone consistency. **Fix:** pull those strings into i18n keys and reuse them everywhere the user’s session status is described.
- **Search results and company selector fallbacks are not localized** (the “Search Results” heading and “No company” text remain raw English in the enhanced search component; `client/src/components/TopBar.jsx:274-312`). **Fix:** introduce translations such as `topbar.search_results_title`/`topbar.no_company` and use `t()` so every label respects the selected locale.

## 2 Sidebar Audit
- **Navigation labels fall back to keys** because only `navigation.ocr_preview` exists in `en/translation.json`, yet the sidebar invokes `t('navigation.dashboard')`, `t('navigation.invoices')`, `t('navigation.bank_statements')`, `t('navigation.german_tax')`, `t('navigation.billing')`, `t('navigation.compliance')`, and section titles like `t('navigation.main')`/`t('navigation.management')`/`t('navigation.system')`. (`client/src/components/Sidebar.jsx:65-137` + `client/public/locales/en/translation.json:1-150`). **Fix:** add the missing keys in every locale and keep the namespace consistent instead of mixing root-level keys (`t('companies')`, `t('users')`, etc.).
- **Feature-flagged routes remain live even when their sidebar entries are hidden.** Items such as `/billing`, `/compliance`, and `/german-tax-reports` (flagged via `FEATURE_FLAGS`) still have `Route` definitions in `AppRoutes` with no guard, so a user who types the URL lands on unfinished flows even though the nav listed them as “coming soon.” (`client/src/components/Sidebar.jsx:109-137` + `client/src/App.jsx:137-220`). **Fix:** mirror the same flag checks in the routing layer or reroute to a gated placeholder so nav state and available routes stay in sync.
- **Active icon treatment is inconsistent** because only some items define `iconSolid` (dashboard, invoices, bank statements, OCR preview, German tax), while others (billing, compliance, management, admin) rely on a single outline icon and lose emphasis when active. (`client/src/components/Sidebar.jsx:165-213`). **Fix:** either supply filled/signed variants for every entry or standardize on the same icon weight so active/inactive states feel uniform.
- **Sidebar footer duplicates the global footer** that is already rendered inside `<Layout>` (`client/src/components/Sidebar.jsx:363-400` vs `client/src/components/Layout.jsx:83-114` and `Footer.jsx:1-13`). This results in two footer regions (sidebar + page footer) that repeat the same text/branding. **Fix:** remove the sidebar footer (or reduce it to a tiny status chip) and keep the single `<Footer />` inside the main column to avoid redundancy.

## 3 Footer Audit
- **Footer duplication and redundancy** — the `Footer` component used by `<Layout>` renders a full block of branding copy (`client/src/components/Footer.jsx:1-13`), but the sidebar already repeats that same branding, so the screen ends up with two footers. **Fix:** decide on a single footer placement (recommend preserving the global `<Footer />` inside `Layout` and stripping the sidebar version) and keep its content minimal (e.g., legal notice + version).

## 4 Language & i18n Audit
- **Hard-coded strings across the UI**:
  - Search panel (“Search Results”), company selector fallback (“No company”), session help text, and dropdown hints inside `TopBar` are literal English rather than translated labels (`client/src/components/TopBar.jsx:274-579`).
  - Sidebar section descriptions (`Overview & Analytics`, `Create & Manage Invoices`, `Bank Transactions`, etc.) and the “Coming soon” card copy are English (`client/src/components/Sidebar.jsx:65-220`).
  - Dashboard states use raw English for the disabled and demo CTAs (“Dashboard temporarily unavailable”, “Re-check availability”, “Go to invoices”, demo modal paragraphs) (`client/src/pages/Dashboard.jsx:110-160`).
  - Invoices, Expenses, and Bank Statements tables/filters/empty/error states use strings like “Select a company”, “Create invoice”, “No expenses yet”, “Bank statements are scoped per company”, “Preview bank statement (no data will be saved)”, etc. (`client/src/pages/Invoices.jsx:122-309`, `client/src/pages/Expenses.jsx:73-149`, `client/src/pages/BankStatements.jsx:146-336`).
  - ReadOnly banners are repeated with literal text in every page (`Dashboard`, `Invoices`, `Expenses`, `BankStatements`).
  **Fix:** identify the key copy that users see in each component, move it into translation keys, and reference them with `t()` so all languages stay consistent.
- **Missing translation keys** (the English translation JSON does not define these keys, so the UI renders fallback identifiers):
  1. `theme.light` / `theme.dark` (TopBar theme toggle). `client/src/components/TopBar.jsx:333-346`
  2. `profile.view`, `settings.title`, `auth.logout` (profile dropdown actions). `client/src/components/TopBar.jsx:546-588`
  3. `sidebar.expand`, `sidebar.collapse` (sidebar collapse button). `client/src/components/Sidebar.jsx:228-236`
  4. `navigation.dashboard`, `navigation.invoices`, `navigation.bank_statements`, `navigation.ocr_preview`, `navigation.german_tax`, `navigation.billing`, `navigation.compliance`, `navigation.main`, `navigation.management`, `navigation.system`. (`client/src/components/Sidebar.jsx:65-220`)
  5. Dashboard copy: at least `dashboard.empty_title`, `dashboard.empty_message`, `dashboard.disabled_title`, `dashboard.disabled_description`, `dashboard.disabled_help` (since those keys are referenced but missing). (`client/src/pages/Dashboard.jsx:110-143`)
  6. `topbar.search_results_title` / `topbar.search_results_empty` / `topbar.no_company` (to cover the enhanced search panel). (`client/src/components/TopBar.jsx:274-312`, `:306-312`)
  7. Empty/error states for invoices/expenses/bank statements: e.g., `invoices.no_company_title`, `invoices.empty_title`, `expenses.empty_title`, `bankStatements.empty_title`, etc.
  **Fix:** expand the locale file so these keys exist (and mirror every new key to other supported languages) and avoid referencing undefined translations.
- **Namespace inconsistency** — some components call `t('companies')`/`t('users')` while others rely on `navigation.*` or `common.*`, so searching for specific terms in the translation file is hard and new translators might duplicate keys. **Fix:** define a consistent structure (`navigation`, `entities`, `common`) and migrate existing references to that namespace before adding new keys.

## 5 Profile & Account UX
- **No implementation exists for the profile dropdown placeholders** — the menu shows “Profile”, “Settings”, and “Bookmarks”, yet the router never registers `/profile`, `/settings`, or `/bookmarks` routes (`client/src/App.jsx:32-220`). The buttons are permanently disabled, so the dropdown has zero navigation value (status: **UNKNOWN** whether any of these pages should exist yet). **Fix:** either wire each entry to a real page or hide the entries; a minimal temporary structure could be `My Profile` (linking to `/users/me` or a new `/profile` view), `Billing & Plan` (linking to `/billing` once flag enabled), and `Logout`.
- **Dropdown lacks a clean account hierarchy** — currently there is no distinction between personal profile, company billing, or session controls. Keep the dropdown lean: primary actions (profile/settings), secondary contextual links (subscription, company switch), and a single logout CTA. Repeated disabled “coming soon” buttons dilute the experience (`client/src/components/TopBar.jsx:546-588`). **Fix:** streamline to a single list of working links and move explanatory text (e.g., role, subscription) into the header area of the menu instead of cluttering the controls.

## 6 Page State Consistency (Dashboard, Invoices, Expenses, Bank Statements)
Each page should consistently present **loading**, **empty**, **error**, and **no-access** states with aligned copy/components.

- **Dashboard** (`client/src/pages/Dashboard.jsx:86-143`): loading uses a `Skeleton`, which is more visually dense than the spinner used elsewhere; error uses `EmptyState` but the help copy is raw text; the disabled state uses bespoke copy instead of translation keys; the empty CTA (“Go to invoices”) is not localized. **Fix:** standardize on the same loading component or at least the same animation style, translate every state copy, and reuse shared components (e.g., `ErrorState`) for errors.
- **Invoices** (`client/src/pages/Invoices.jsx:122-309`): the “select a company” state is the only no-access path, but other pages escalate to a more informative layout; error feedback is a bare `<div>` instead of `ErrorState`/`EmptyState`; empty-state CTA (“Create invoice”) is not translated; table headers and filters are hard-coded English strings. **Fix:** show the same `EmptyState` component for errors, translate all copy, and ensure the “no company” message lines up with the other pages.
- **Expenses** (`client/src/pages/Expenses.jsx:73-149`): there is no guard when `activeCompany` is missing, so the page renders a blank table instead of an explicit no-access message; the read-only banner, empty state, table headers, and buttons are all literal English. **Fix:** detect `!activeCompany` and render the standard “select a company” `EmptyState`, translate the strings, and keep the read-only banner consistent with the other experience.
- **Bank Statements** (`client/src/pages/BankStatements.jsx:146-336`): loading uses a spinner, but error displays a plain `p` with `error.message`; empty state copy and CTA (“Upload Statement”) are not localized and even keeps the button disabled with a tooltip; preview/import action tooltips and helper sentences are hard-coded. **Fix:** reuse `EmptyState`/`ErrorState`, translate all copy, and surface consistent CTAs/disabled indicators for read-only users.

---

**Next steps:** once these audits are acknowledged, we can turn the recommendations into refactors, add the missing i18n keys, and then sync the sidebar/footer layout so the UI feels cohesive.
