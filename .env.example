
# Environment variables (canonical examples)
#
# IMPORTANT:
# - Local dev (no Docker): default to SQLite
# - Docker local: values are injected by docker-compose.yml
# - Docker tests: values are injected by docker-compose.test.yml
#
# Port mapping summary:
# - Local backend: 5000
# - Docker backend: host 5001 → container 5000
# - Docker backend: host 5001 → container 5000
#
DATABASE_URL for host:      postgres://postgres:postgres@localhost:5432/smartaccounting
DATABASE_URL for container: postgres://postgres:postgres@db:5432/smartaccounting
# - Frontend: 3000 (docker local / client dev)

NODE_ENV=development
PORT=5001
HOST=0.0.0.0
API_BASE_URL=/api
# Gate real bank statement imports (default off until rollout is ready).
BANK_IMPORT_ENABLED=false
# Enable the conversational AI assistant (read-only).
AI_ASSISTANT_ENABLED=true
# Enable AI voice input (transcription-based, no raw audio storage by default).
AI_VOICE_ENABLED=false
# Enable AI text-to-speech responses (plan/tenant gated).
AI_TTS_ENABLED=false
# Cookies should be secure over HTTPS. Set to false for local HTTP testing.
SECURE_COOKIES=false
TRUST_PROXY=false

CLIENT_URL=http://localhost:5173
FRONTEND_URL=http://localhost:5173
CORS_ORIGIN=http://localhost:5173

# JWT configuration (required: replace with a securely generated 32+ character secret)
JWT_SECRET=dev_super_secret_jwt_key_12345678901234567890
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=dev_super_refresh_secret_12345678901234567890
JWT_REFRESH_EXPIRES_IN=7d

# VITE_API_URL=   # Leave empty to use Vite proxy (/api)
# Never use docker service names (e.g. http://backend:5000/api) in browser env!

JSON_LIMIT=10mb

# Logging & observability
LOG_LEVEL=debug
REQUEST_LOGGING=true
METRICS_ENABLED=false
LOG_SLOW_REQUEST_MS=1000
METRICS_SNAPSHOT_INTERVAL_MS=60000

# Database configuration
USE_SQLITE=true
DATABASE_URL=sqlite:./database/dev.sqlite
SQLITE_STORAGE_PATH=database/dev.sqlite
DB_POOL_MAX=10
DB_POOL_MIN=0
DB_POOL_ACQUIRE=30000
DB_POOL_IDLE=10000
DB_SSL=false
SEQUELIZE_LOGGING=false

# Initial administrator seed (no production credentials allowed here)
ADMIN_EMAIL=admin@your-domain.test
ADMIN_PASSWORD=replace_with_secure_password
ADMIN_COMPANY_NAME=SmartAccounting HQ
ADMIN_COMPANY_TAX_ID=DE000000001
ADMIN_COMPANY_ADDRESS=1 Demo Lane
ADMIN_COMPANY_CITY=Berlin
ADMIN_COMPANY_POSTAL=10115
ADMIN_COMPANY_COUNTRY=DE
ADMIN_FIRST_NAME=System
ADMIN_LAST_NAME=Admin

JWT_SECRET_SALT=12

# Email integration
EMAIL_HOST=localhost
EMAIL_PORT=1025
EMAIL_USER=mailer@example.test
EMAIL_PASS=replace_with_secure_email_password
EMAIL_FROM="SmartAccounting <no-reply@example.test>"
SAFE_MODE=false

# Stripe credentials (leave blank if billing is disabled)
STRIPE_SECRET_KEY=replace_with_stripe_secret_key
STRIPE_WEBHOOK_SECRET=replace_with_stripe_webhook_secret
STRIPE_PUBLISHABLE_KEY=replace_with_stripe_publishable_key

# German Tax / ELSTER integration (certificate is required for production)
ELSTER_URL=https://www.elster.de/elsterweb/api
ELSTER_CERTIFICATE_PATH=./certs/elster.pem

# OCR helpers
OCR_SERVICE_URL=http://localhost:8000
OCR_API_KEY=replace_with_ocr_api_key
OCR_PREVIEW_ENABLED=false

# Cache settings
REDIS_URL=redis://localhost:6379
CACHE_TTL=3600

# Upload handling
UPLOAD_DIR=uploads
MAX_FILE_SIZE=5000000

RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX=100
ALLOW_PROD_MIGRATION=true
